/*
 * 
 *     .org $8000
 * reset:
 *     ldx #$ff
 *     txs
 *     clv
 *     cli
 *     nop
 *     nop
 *     nop
 *     nop
 * 
 *     .org $a000
 * irq:
 * nmi:
 *     rti
 * 
 *     .org $fffa
 *     .word nmi
 *     .word reset
 *     .word irq
 * 
*/
ProgramFragment nmi_prog[] = {
   {0x8000, 9, {0xa2, 0xff, 0x9a, 0xb8, 0x58, 0xea, 0xea, 0xea, 0xea}},
   {0xa000, 1, {0x40}},
   {0xfffb, 5, {0xa0, 0x00, 0x80, 0x00, 0xa0}},
   {0, 0, {0}}
};
PinState nmi_0_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fe, 0x05},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffa, 0x00},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffb, 0xa0},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0xa000, 0x40},
};
const size_t nmi_0_cycles = sizeof(nmi_0_pin)/sizeof(nmi_0_pin[0]);
PinState nmi_1_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fe, 0x06},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffa, 0x00},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffb, 0xa0},
};
const size_t nmi_1_cycles = sizeof(nmi_1_pin)/sizeof(nmi_1_pin[0]);
PinState nmi_2_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fe, 0x06},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffa, 0x00},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffb, 0xa0},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0xa000, 0x40},
};
const size_t nmi_2_cycles = sizeof(nmi_2_pin)/sizeof(nmi_2_pin[0]);
PinState nmi_3_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fe, 0x07},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffa, 0x00},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffb, 0xa0},
};
const size_t nmi_3_cycles = sizeof(nmi_3_pin)/sizeof(nmi_3_pin[0]);
PinState nmi_4_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fe, 0x07},
   {1, 1, 1, 0, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffa, 0x00},
   {1, 1, 1, 0, 1, 0, 0, 1, 1, 0xfffb, 0xa0},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0xa000, 0x40},
};
const size_t nmi_4_cycles = sizeof(nmi_4_pin)/sizeof(nmi_4_pin[0]);
PinState nmi_5_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fe, 0x05},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 1, 1, 0, 0, 1, 1, 0xfffa, 0x00},
   {1, 1, 1, 1, 1, 0, 0, 1, 1, 0xfffb, 0xa0},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0xa000, 0x40},
};
const size_t nmi_5_cycles = sizeof(nmi_5_pin)/sizeof(nmi_5_pin[0]);
PinState nmi_6_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fe, 0x06},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 1, 1, 0, 0, 1, 1, 0xfffa, 0x00},
};
const size_t nmi_6_cycles = sizeof(nmi_6_pin)/sizeof(nmi_6_pin[0]);
PinState nmi_7_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fe, 0x06},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fd, 0xa0},
   {1, 1, 1, 1, 1, 0, 0, 1, 1, 0xfffa, 0x00},
};
const size_t nmi_7_cycles = sizeof(nmi_7_pin)/sizeof(nmi_7_pin[0]);
PinState nmi_8_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 0, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fe, 0x07},
};
const size_t nmi_8_cycles = sizeof(nmi_8_pin)/sizeof(nmi_8_pin[0]);
PinState nmi_9_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0xa2},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8002, 0x9a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0xb8},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8004, 0x58},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8005, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 0, 1, 1, 1, 1, 1, 0x8006, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8007, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01ff, 0x80},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x01fe, 0x07},
};
const size_t nmi_9_cycles = sizeof(nmi_9_pin)/sizeof(nmi_9_pin[0]);
PinTestSuite nmi_suite[] = {
   {nmi_0_pin, nmi_0_cycles},
   {nmi_1_pin, nmi_1_cycles},
   {nmi_2_pin, nmi_2_cycles},
   {nmi_3_pin, nmi_3_cycles},
   {nmi_4_pin, nmi_4_cycles},
   {nmi_5_pin, nmi_5_cycles},
   {nmi_6_pin, nmi_6_cycles},
   {nmi_7_pin, nmi_7_cycles},
   {nmi_8_pin, nmi_8_cycles},
   {nmi_9_pin, nmi_9_cycles},
   {0, 0}
};
