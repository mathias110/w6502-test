/*
 * 
 *     .org $a
 *     .byte $00
 *     
 *     .org $7ff0
 * bbr_1:
 *     bbr1 $a, bbr_2
 * bbr_3:
 *     bbr3 $a, bbr_4
 * bbr_5:
 *     bbr5 $a, bbr_6
 *     
 *     .org $8000
 * reset:
 *     bbr0 $a, bbr_1
 * bbr_2:
 *     bbr2 $a, bbr_3
 * bbr_4:
 *     bbr4 $a, bbr_5
 * bbr_6:
 *     bbr6 $a, bbr_7
 *     nop
 * bbr_7:
 *     bbr7 $a, bbr_a
 *     nop
 * bbr_a:
 *     lda #$ff
 *     sta $a
 *     jmp reset
 *     
 *     .org $a000
 * irq:
 * nmi:
 *     rti
 * 
 *     .org $fffa
 *     .word nmi
 *     .word reset
 *     .word irq
 * 
*/
ProgramFragment bbr_prog[] = {
   {0x7ff0, 9, {0x1f, 0x0a, 0x10, 0x3f, 0x0a, 0x10, 0x5f, 0x0a, 0x10}},
   {0x8000, 10, {0x0f, 0x0a, 0xed, 0x2f, 0x0a, 0xed, 0x4f, 0x0a, 0xed, 0x6f}},
   {0x800a, 14, {0x0a, 0x01, 0xea, 0x7f, 0x0a, 0x01, 0xea, 0xa9, 0xff, 0x85, 0x0a, 0x4c, 0x00, 0x80}},
   {0xa000, 1, {0x40}},
   {0xfffb, 5, {0xa0, 0x00, 0x80, 0x00, 0xa0}},
   {0, 0, {0}}
};
PinState bbr_pin[] = {
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0x0f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8002, 0xed},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0x2f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8003, 0x2f},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x7ff0, 0x1f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff1, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff2, 0x10},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff3, 0x3f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff3, 0x3f},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0x2f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xed},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0x4f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8006, 0x4f},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x7ff3, 0x3f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff4, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff5, 0x10},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff6, 0x5f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff6, 0x5f},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8006, 0x4f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8007, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8008, 0xed},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8009, 0x6f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8009, 0x6f},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x7ff6, 0x5f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff7, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff8, 0x10},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff9, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x7ff9, 0x00},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8009, 0x6f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800a, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800b, 0x01},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800c, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x800d, 0x7f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800e, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800f, 0x01},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8010, 0xea},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8011, 0xa9},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8012, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8013, 0x85},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8014, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 0, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8015, 0x4c},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8016, 0x00},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8017, 0x80},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8000, 0x0f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8001, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8002, 0xed},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8003, 0x2f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8004, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8005, 0xed},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8006, 0x4f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8007, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8008, 0xed},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8009, 0x6f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800a, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800b, 0x01},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x800c, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800d, 0x7f},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x800d, 0x7f},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800e, 0x0a},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x000a, 0xff},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x800f, 0x01},
   {1, 1, 1, 1, 1, 1, 1, 1, 1, 0x8010, 0xea},
   {1, 1, 1, 1, 1, 0, 1, 1, 1, 0x8011, 0xa9},
};
const size_t bbr_cycles = sizeof(bbr_pin)/sizeof(bbr_pin[0]);
